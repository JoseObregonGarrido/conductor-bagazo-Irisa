const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Model3D-B3iOsBEX.js","./vendor-react-D_7EDXj9.js","./vendor-three-Dq0513u4.js","./Model3D-C3hioEK8.css"])))=>i.map(i=>d[i]);
import{j as e,r as h,R as b,a as S}from"./vendor-react-D_7EDXj9.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function i(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(n){if(n.ep)return;n.ep=!0;const t=i(n);fetch(n.href,t)}})();function N(){return e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{className:"header-title",children:"Sistema de Monitoreo - Conductores de Bagazo"}),e.jsx("p",{className:"header-subtitle",children:"Sistema de Monitoreo - Conductores de Bagazo"})]}),e.jsx("div",{className:"header-info",children:e.jsx("span",{className:"badge",children:"IRISA S.A.S."})})]})})}function g(){const r=new Date().getFullYear();return e.jsx("footer",{className:"footer",children:e.jsxs("div",{className:"footer-container",children:[e.jsx("div",{className:"footer-content",children:e.jsxs("div",{className:"footer-info",children:[e.jsxs("p",{className:"footer-text",children:["© ",r," Sistema Conductores de Bagazo - IRISA S.A.S."]}),e.jsx("p",{className:"footer-subtitle",children:"Sistema de Monitoreo - Conductores de Bagazo"})]})}),e.jsx("div",{className:"footer-divider"}),e.jsx("div",{className:"footer-credits",children:e.jsxs("p",{className:"footer-credits-text",children:["|",e.jsx("a",{href:"https://www.ingeniorisaralda.com/es/",className:"footer-link",children:" IRISA S.A.S "})," |",e.jsx("a",{href:"#",className:"footer-link",children:" La Virginia "})]})})]})})}const C="modulepreload",w=function(r,o){return new URL(r,o).href},v={},E=function(o,i,l){let n=Promise.resolve();if(i&&i.length>0){let x=function(a){return Promise.all(a.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const s=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),p=c?.nonce||c?.getAttribute("nonce");n=x(i.map(a=>{if(a=w(a,l),a in v)return;v[a]=!0;const d=a.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(l)for(let f=s.length-1;f>=0;f--){const j=s[f];if(j.href===a&&(!d||j.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${m}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":C,d||(u.as="script"),u.crossOrigin="",u.href=a,p&&u.setAttribute("nonce",p),document.head.appendChild(u),d)return new Promise((f,j)=>{u.addEventListener("load",f),u.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${a}`)))})}))}function t(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return n.then(s=>{for(const c of s||[])c.status==="rejected"&&t(c.reason);return o().catch(t)})},P=h.lazy(()=>E(()=>import("./Model3D-B3iOsBEX.js"),__vite__mapDeps([0,1,2,3]),import.meta.url));function A({puntos:r,onPuntoClick:o}){const[i,l]=h.useState(null),n=s=>({red:"#B81D1D",green:"#006B42",yellow:"#A06000",blue:"#1B4965"})[s]||"#B81D1D",t=s=>{l(s.id),o?.(s)};return e.jsxs("div",{className:"diagram-container",children:[e.jsx("h2",{className:"diagram-title",children:"Conductores de Bagazo"}),e.jsxs("div",{className:"diagram-content",children:[e.jsx("div",{className:"diagram-image-wrapper",children:e.jsx(h.Suspense,{fallback:e.jsx("div",{children:"Cargando Modelo 3D..."}),children:e.jsx(P,{})})}),e.jsxs("div",{className:"diagram-legend",children:[e.jsx("p",{className:"legend-title",children:"Selecciona un conductor para ver los detalles:"}),e.jsx("div",{className:"legend-items",role:"group","aria-label":"Conductores",children:r.map(s=>e.jsx("button",{className:`legend-item ${i===s.id?"active":""}`,style:{backgroundColor:n(s.color)},onClick:()=>t(s),title:s.nombre,"aria-label":`Conductor ${s.nombre}`,"aria-pressed":i===s.id,children:e.jsx("span",{className:"legend-number",children:s.nombre})},s.id))})]})]}),e.jsx("p",{className:"diagram-hint",children:"Haz clic en cualquier conductor para ver la información completa"})]})}const B=r=>({red:"#B81D1D",green:"#006B42",yellow:"#A06000",blue:"#1B4965"})[r]||"#B81D1D";function k({punto:r,onClose:o}){return r?e.jsxs("div",{className:"info-panel animated",children:[e.jsxs("div",{className:"info-header",children:[e.jsx("div",{className:"punto-badge",style:{backgroundColor:B(r.color)},children:r.nombre}),e.jsx("button",{className:"close-button",onClick:o,title:"Cerrar",children:"✕"})]}),e.jsx("div",{className:"info-content",children:e.jsxs("div",{className:"info-section description-section",children:[e.jsx("h4",{children:"Descripción:"}),e.jsx("p",{className:"info-description",children:r.descripcion}),e.jsx("h4",{children:"Tipo:"}),e.jsx("p",{className:"info-type",children:r.tipo})]})})]},r.id):e.jsx("div",{className:"info-panel",children:e.jsxs("div",{className:"info-empty",children:[e.jsx("h3",{children:"Selecciona un Conductor"}),e.jsx("p",{children:"Haz clic en cualquier conductor (C1 a C12) de la leyenda para ver su descripción."})]})})}const y="http://localhost:5000/api",D=async()=>{try{const r=await fetch(`${y}/puntos`);if(!r.ok)throw new Error("Error al obtener los puntos");return await r.json()}catch(r){throw console.error("Error en obtenerPuntos:",r),r}},M=async()=>{try{const r=await fetch(`${y.replace("/api","")}/api/health`);if(!r.ok)throw new Error("Backend no disponible");return await r.json()}catch(r){throw console.error("Error al conectar con el backend:",r),r}};function R(){const[r,o]=h.useState([]),[i,l]=h.useState(null),[n,t]=h.useState(!0),[s,c]=h.useState(null);h.useEffect(()=>{(async()=>{try{await M();const d=await D();o(d),c(null)}catch{c("No se pudo conectar con el backend. Asegúrate de que esté ejecutándose en el puerto 5000.")}finally{t(!1)}})()},[]);const p=a=>{l(a)},x=()=>{l(null)};return n?e.jsxs("div",{className:"app",children:[e.jsx(N,{}),e.jsx("main",{className:"main-content",children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Cargando datos..."})]})}),e.jsx(g,{})]}):s?e.jsxs("div",{className:"app",children:[e.jsx(N,{}),e.jsx("main",{className:"main-content",children:e.jsxs("div",{className:"error",children:[e.jsx("h2",{children:"⚠️ Error de Conexión"}),e.jsx("p",{children:s}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Intentar de nuevo"})]})}),e.jsx(g,{})]}):e.jsxs("div",{className:"app",children:[e.jsx(N,{}),e.jsx("main",{className:"main-content",children:e.jsxs("div",{className:"content-grid",children:[e.jsx("div",{className:"diagram-section",children:r.length>0?e.jsx(A,{puntos:r,onPuntoClick:p}):e.jsx("p",{className:"no-data",children:"No hay datos disponibles"})}),e.jsx("div",{className:"info-section",children:e.jsx(k,{punto:i,onClose:x})})]})}),e.jsx(g,{})]})}b.createRoot(document.getElementById("root")).render(e.jsx(S.StrictMode,{children:e.jsx(R,{})}));
