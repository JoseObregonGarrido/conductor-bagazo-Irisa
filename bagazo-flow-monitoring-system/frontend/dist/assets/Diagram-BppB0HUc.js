import{r as c,j as e}from"./vendor-react-BIqM1h2R.js";import{S as A,C as E,P,W as S,A as M,D as B,O as y,G as k,a as O,B as W,V as z}from"./vendor-three-Dq0513u4.js";function F(){const n=c.useRef(null),m=c.useRef(null),u=c.useRef(null),h=c.useRef(null),p=c.useRef(null);return c.useEffect(()=>{if(!n.current)return;const o=new A;o.background=new E(988970),m.current=o;const t=n.current.clientWidth,g=n.current.clientHeight,a=new P(75,t/g,.1,1e3);a.position.set(0,2,3),u.current=a;const r=new S({antialias:!0});r.setSize(t,g),r.setPixelRatio(window.devicePixelRatio),n.current.appendChild(r.domElement),h.current=r;const D=new M(16777215,.8);o.add(D);const f=new B(16777215,.9);f.position.set(5,5,5),o.add(f);const s=new y(a,r.domElement);s.enableDamping=!0,s.dampingFactor=.05,s.autoRotate=!0,s.autoRotateSpeed=2,p.current=s;const w=new k,v=new O;v.setDecoderPath("/draco-gltf/"),w.setDRACOLoader(v),w.load("/model/modelo-3d-comprimido.glb",l=>{const i=l.scene;i.scale.set(1.15,1.15,1.15),o.add(i);const b=new W().setFromObject(i),d=b.getCenter(new z),x=b.getSize(new z),C=Math.max(x.x,x.y,x.z),L=a.fov*(Math.PI/180);let N=Math.abs(C/2/Math.tan(L/2));N*=1.12,a.position.z=N,a.position.x=d.x,a.position.y=d.y+C*.18,a.lookAt(d),s.target.copy(d),s.update()});const j=()=>{requestAnimationFrame(j),s.update(),r.render(o,a)};j();const R=()=>{if(!n.current)return;const l=n.current.clientWidth,i=n.current.clientHeight;a.aspect=l/i,a.updateProjectionMatrix(),r.setSize(l,i)};return window.addEventListener("resize",R),()=>{window.removeEventListener("resize",R),n.current&&r.domElement.parentNode===n.current&&n.current.removeChild(r.domElement),r.dispose()}},[]),e.jsxs("div",{className:"model3d-container",children:[e.jsx("div",{ref:n,className:"model3d-viewer"}),e.jsx("div",{className:"model3d-info",children:e.jsx("p",{children:"Usa el mouse para rotar o su pantalla táctil | Scroll para zoom o pellizcar para acercar/alejar"})})]})}function q({puntos:n,onPuntoClick:m}){const[u,h]=c.useState(null),p=t=>({red:"#B81D1D",green:"#006B42",yellow:"#A06000",blue:"#1B4965"})[t]||"#B81D1D",o=t=>{h(t.id),m(t)};return e.jsxs("div",{className:"diagram-container",children:[e.jsx("h2",{className:"diagram-title",children:"Conductores de Bagazo"}),e.jsxs("div",{className:"diagram-content",children:[e.jsx("div",{className:"diagram-image-wrapper",children:e.jsx(F,{})}),e.jsxs("div",{className:"diagram-legend",children:[e.jsx("p",{className:"legend-title",children:"Selecciona un conductor para ver los detalles:"}),e.jsx("div",{className:"legend-items",children:n.map(t=>e.jsx("button",{className:`legend-item ${u===t.id?"active":""}`,style:{backgroundColor:p(t.color)},onClick:()=>o(t),title:t.nombre,children:e.jsx("span",{className:"legend-number",children:t.nombre})},t.id))})]})]}),e.jsx("p",{className:"diagram-hint",children:"Haz clic en cualquier conductor para ver la información completa"})]})}export{q as default};
