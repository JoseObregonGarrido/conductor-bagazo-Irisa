const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Diagram-LKZdXjMy.js","assets/vendor-react-D_7EDXj9.js","assets/vendor-three-Dq0513u4.js","assets/Diagram-D3976avp.css"])))=>i.map(i=>d[i]);
import{j as e,r as u,R as y,a as S}from"./vendor-react-D_7EDXj9.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const t of n.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&l(t)}).observe(document,{childList:!0,subtree:!0});function i(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(r){if(r.ep)return;r.ep=!0;const n=i(r);fetch(r.href,n)}})();const w="modulepreload",b=function(s){return"/"+s},x={},E=function(c,i,l){let r=Promise.resolve();if(i&&i.length>0){let f=function(a){return Promise.all(a.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),o=t?.nonce||t?.getAttribute("nonce");r=f(i.map(a=>{if(a=b(a),a in x)return;x[a]=!0;const d=a.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${m}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":w,d||(h.as="script"),h.crossOrigin="",h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),d)return new Promise((v,g)=>{h.addEventListener("load",v),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}function n(t){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=t,window.dispatchEvent(o),!o.defaultPrevented)throw t}return r.then(t=>{for(const o of t||[])o.status==="rejected"&&n(o.reason);return c().catch(n)})};function p(){return e.jsx("header",{className:"header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{className:"header-title",children:"Sistema de Monitoreo - Conductores de Bagazo"}),e.jsx("p",{className:"header-subtitle",children:"Sistema de Monitoreo - Conductores de Bagazo"})]}),e.jsx("div",{className:"header-info",children:e.jsx("span",{className:"badge",children:"IRISA S.A.S."})})]})})}function C({punto:s,onClose:c}){const[i,l]=u.useState(!1),r=n=>({red:"#B81D1D",green:"#006B42",yellow:"#A06000",blue:"#1B4965"})[n]||"#B81D1D";return u.useEffect(()=>{s&&(l(!1),setTimeout(()=>{l(!0)},50))},[s?.id]),s?e.jsxs("div",{className:`info-panel ${i?"animated":""}`,children:[e.jsxs("div",{className:"info-header",children:[e.jsx("div",{className:"punto-badge",style:{backgroundColor:r(s.color)},children:s.nombre}),e.jsx("button",{className:"close-button",onClick:c,title:"Cerrar",children:"✕"})]}),e.jsx("div",{className:"info-content",children:e.jsx("div",{className:"info-section",children:e.jsx("p",{className:"info-description",children:s.descripcion})})}),e.jsx("div",{className:"info-content",children:e.jsx("div",{className:"info-section",children:e.jsx("p",{className:"info-description",children:s.tipo})})})]}):e.jsx("div",{className:"info-panel",children:e.jsxs("div",{className:"info-empty",children:[e.jsx("h3",{children:"Selecciona un Conductor"}),e.jsx("p",{children:"Haz clic en cualquier conductor (C1 a C12) de la leyenda para ver su descripción."})]})})}function j(){const s=new Date().getFullYear();return e.jsx("footer",{className:"footer",children:e.jsxs("div",{className:"footer-container",children:[e.jsx("div",{className:"footer-content",children:e.jsxs("div",{className:"footer-info",children:[e.jsxs("p",{className:"footer-text",children:["© ",s," Sistema Conductores de Bagazo - IRISA S.A.S."]}),e.jsx("p",{className:"footer-subtitle",children:"Sistema de Monitoreo - Conductores de Bagazo"})]})}),e.jsx("div",{className:"footer-divider"}),e.jsx("div",{className:"footer-credits",children:e.jsxs("p",{className:"footer-credits-text",children:["|",e.jsx("a",{href:"https://www.ingeniorisaralda.com/es/",className:"footer-link",children:" IRISA S.A.S "})," |",e.jsx("a",{href:"#",className:"footer-link",children:" La Virginia "})]})})]})})}const N="http://localhost:5000/api",P=async()=>{try{const s=await fetch(`${N}/puntos`);if(!s.ok)throw new Error("Error al obtener los puntos");return await s.json()}catch(s){throw console.error("Error en obtenerPuntos:",s),s}},A=async()=>{try{const s=await fetch(`${N.replace("/api","")}/api/health`);if(!s.ok)throw new Error("Backend no disponible");return await s.json()}catch(s){throw console.error("Error al conectar con el backend:",s),s}},B=u.lazy(()=>E(()=>import("./Diagram-LKZdXjMy.js"),__vite__mapDeps([0,1,2,3])));function I(){const[s,c]=u.useState([]),[i,l]=u.useState(null),[r,n]=u.useState(!0),[t,o]=u.useState(null);u.useEffect(()=>{(async()=>{try{await A();const m=await P();c(m),o(null)}catch{o("No se pudo conectar con el backend. Asegúrate de que esté ejecutándose en el puerto 5000.")}finally{n(!1)}})()},[]);const f=d=>{l(d)},a=()=>{l(null)};return r?e.jsxs("div",{className:"app",children:[e.jsx(p,{}),e.jsx("main",{className:"main-content",children:e.jsxs("div",{className:"loading",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Cargando datos..."})]})}),e.jsx(j,{})]}):t?e.jsxs("div",{className:"app",children:[e.jsx(p,{}),e.jsx("main",{className:"main-content",children:e.jsxs("div",{className:"error",children:[e.jsx("h2",{children:" Error de Conexión"}),e.jsx("p",{children:t}),e.jsx("button",{onClick:()=>window.location.reload(),children:"Intentar de nuevo"})]})}),e.jsx(j,{})]}):e.jsxs("div",{className:"app",children:[e.jsx(p,{}),e.jsx("main",{className:"main-content",children:e.jsxs("div",{className:"content-grid",children:[e.jsx("div",{className:"diagram-section",children:s.length>0?e.jsx(u.Suspense,{fallback:e.jsx("div",{className:"loading-model",children:"Inicializando simulación 3D..."}),children:e.jsx(B,{puntos:s,onPuntoClick:f})}):e.jsx("p",{className:"no-data",children:"No hay datos disponibles"})}),e.jsx("div",{className:"info-section",children:e.jsx(C,{punto:i,onClose:a})})]})}),e.jsx(j,{})]})}y.createRoot(document.getElementById("root")).render(e.jsx(S.StrictMode,{children:e.jsx(I,{})}));
