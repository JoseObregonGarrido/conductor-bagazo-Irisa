import{r as a,j as m}from"./vendor-react-D_7EDXj9.js";import{S as b,C as O,P as W,W as N,A as j,D as G,O as H,G as I,a as k,B,V as C}from"./vendor-three-Dq0513u4.js";function Z(){const o=a.useRef(null),f=a.useRef(null),S=a.useRef(null),l=a.useRef(null),p=a.useRef(null),h=a.useRef(null),y=a.useRef(null),d=a.useRef(null);return a.useEffect(()=>{if(!o.current)return;const c=new b;c.background=new O(988970),f.current=c;const w=o.current.clientWidth,R=o.current.clientHeight,t=new W(60,w/R,.1,1e3);t.position.set(0,6,10),S.current=t;const i=new N({antialias:!0,powerPreference:"high-performance",stencil:!1,depth:!0});i.setSize(w,R),i.setPixelRatio(Math.min(window.devicePixelRatio,2)),o.current.appendChild(i.domElement),l.current=i;const F=new j(16777215,.8);c.add(F);const x=new G(16777215,.9);x.position.set(5,5,5),c.add(x);const s=new H(t,i.domElement);s.enableDamping=!0,s.dampingFactor=.05,s.autoRotate=!0,s.autoRotateSpeed=2,s.maxPolarAngle=Math.PI/1.8,s.minDistance=3,s.maxDistance=60,p.current=s;const M=new I,v=new k;v.setDecoderPath("/draco-gltf/"),M.setDRACOLoader(v),M.load("/model/modelo-3d-comprimido.glb",e=>{const r=e.scene;r.scale.set(.8,.8,.8),c.add(r),y.current=r;const n=new B().setFromObject(r),u=n.getCenter(new C),g=n.getSize(new C),E=Math.max(g.x,g.y,g.z),T=t.fov*(Math.PI/180);let A=Math.abs(E/2/Math.tan(T/2));A*=3,t.position.z=A,t.position.x=u.x,t.position.y=u.y+E*.5,t.lookAt(u),s.target.copy(u),s.update()},void 0,e=>{console.error("Error al cargar el modelo 3D:",e)});let z=performance.now();const L=1e3/60,P=e=>{h.current=requestAnimationFrame(P);const r=e-z;r<L||(z=e-r%L,s.update()&&i.render(c,t))};P(performance.now());const D=()=>{d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{if(!o.current)return;const e=o.current.clientWidth,r=o.current.clientHeight;Math.abs(t.aspect-e/r)>.01&&(t.aspect=e/r,t.updateProjectionMatrix(),i.setSize(e,r,!1))},150)};return window.addEventListener("resize",D,{passive:!0}),()=>{h.current&&cancelAnimationFrame(h.current),d.current&&clearTimeout(d.current),window.removeEventListener("resize",D),f.current&&f.current.traverse(e=>{e.isMesh&&(e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material:[e.material]).forEach(n=>{n.map&&n.map.dispose(),n.normalMap&&n.normalMap.dispose(),n.roughnessMap&&n.roughnessMap.dispose(),n.metalnessMap&&n.metalnessMap.dispose(),n.dispose()}))}),l.current&&l.current.dispose(),p.current&&p.current.dispose(),o.current&&l.current?.domElement?.parentNode===o.current&&o.current.removeChild(l.current.domElement)}},[]),m.jsxs("div",{className:"model3d-container",children:[m.jsx("div",{ref:o,className:"model3d-viewer"}),m.jsx("div",{className:"model3d-info",children:m.jsx("p",{children:"Usa el mouse para rotar o su pantalla t√°ctil | Scroll para zoom o pellizcar para acercar/alejar"})})]})}export{Z as default};
